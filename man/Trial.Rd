% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Trial.R
\docType{class}
\name{Trial}
\alias{Trial}
\title{Class of Trial}
\description{
Create a class of trial.
}
\examples{
risk1 <- data.frame(
  end_time = c(1, 10, 26.0, 52.0),
  piecewise_risk = c(1, 1.01, 0.381, 0.150) * exp(-3.01)
)

pfs1 <- Endpoint$new(name = 'pfs', type='tte',
          generator = PiecewiseConstantExponentialRNG,
          risk = risk1, endpoint_name = 'pfs')
orr1 <- Endpoint$new(
  name = 'orr', type = 'non-tte',
  readout = c(orr=1), generator = rbinom,
  size = 1, prob = .4)
placebo <- Arm$new(
  name = 'pbo', description = 'Placebo arm')

placebo$add_endpoints(pfs1, orr1)

risk2 <- risk1
risk2$hazard_ratio <- .8
pfs2 <- Endpoint$new(name = 'pfs', type='tte',
          generator = PiecewiseConstantExponentialRNG,
          risk = risk2, endpoint_name = 'pfs')
orr2 <- Endpoint$new(
  name = 'orr', type = 'non-tte',
  generator = rbinom, readout = c(orr=3),
  size = 1, prob = .6)
active <- Arm$new(
  name = 'ac', description = 'Active arm')

active$add_endpoints(pfs2, orr2)

## Plan a trial, Trial-3415, of up to 100 patients.
## Enrollment time follows an exponential distribution, with median 5
trial <- Trial$new(
  name = 'Trial-3415', n_patients = 100,
  seed = 31415926, duration = 100,
  enroller = rexp, rate = log(2) / 5)
trial$add_arms(sample_ratio = c(1, 2), placebo, active)


## ------------------------------------------------
## Method `Trial$get_data_lock_time_by_event_number`
## ------------------------------------------------

## trial$get_data_lock_time_by_event_number(c('pfs','orr'), c(200,500), 'any')

## ------------------------------------------------
## Method `Trial$get_data_lock_time_by_calendar_time`
## ------------------------------------------------

## trial$get_data_lock_time_by_calendar_time(20)

## ------------------------------------------------
## Method `Trial$independentIncrement`
## ------------------------------------------------


\dontrun{
trial$independentIncrement('pfs', 'pbo', listener$get_event_names(), 'oracle')
}

## ------------------------------------------------
## Method `Trial$dunnettTest`
## ------------------------------------------------

\dontrun{
trial$dunnettTest('pfs', 'pbo', c('high dose', 'low dose'), listener$get_event_names(), 'default')
}


## ------------------------------------------------
## Method `Trial$closedTest`
## ------------------------------------------------

\dontrun{
dt <- trial$dunnettTest(
  'pfs', 'pbo', c('high dose', 'low dose'),
  listener$get_event_names(), 'default')

trial$closedTest(dt, c('high dose', 'low dose'),
                 c('pfs interim', 'pfs final'),
                 0.025, 'asOF')
}

}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-Trial-new}{\code{Trial$new()}}
\item \href{#method-Trial-get_trial_data}{\code{Trial$get_trial_data()}}
\item \href{#method-Trial-get_duration}{\code{Trial$get_duration()}}
\item \href{#method-Trial-set_enroller}{\code{Trial$set_enroller()}}
\item \href{#method-Trial-get_enroller}{\code{Trial$get_enroller()}}
\item \href{#method-Trial-set_dropout}{\code{Trial$set_dropout()}}
\item \href{#method-Trial-get_dropout}{\code{Trial$get_dropout()}}
\item \href{#method-Trial-roll_back}{\code{Trial$roll_back()}}
\item \href{#method-Trial-remove_arms}{\code{Trial$remove_arms()}}
\item \href{#method-Trial-update_sample_ratio}{\code{Trial$update_sample_ratio()}}
\item \href{#method-Trial-add_arms}{\code{Trial$add_arms()}}
\item \href{#method-Trial-get_name}{\code{Trial$get_name()}}
\item \href{#method-Trial-get_description}{\code{Trial$get_description()}}
\item \href{#method-Trial-get_arms}{\code{Trial$get_arms()}}
\item \href{#method-Trial-get_arms_name}{\code{Trial$get_arms_name()}}
\item \href{#method-Trial-get_number_arms}{\code{Trial$get_number_arms()}}
\item \href{#method-Trial-has_arm}{\code{Trial$has_arm()}}
\item \href{#method-Trial-get_an_arm}{\code{Trial$get_an_arm()}}
\item \href{#method-Trial-get_sample_ratio}{\code{Trial$get_sample_ratio()}}
\item \href{#method-Trial-get_number_patients}{\code{Trial$get_number_patients()}}
\item \href{#method-Trial-get_number_enrolled_patients}{\code{Trial$get_number_enrolled_patients()}}
\item \href{#method-Trial-get_number_unenrolled_patients}{\code{Trial$get_number_unenrolled_patients()}}
\item \href{#method-Trial-get_randomization_queue}{\code{Trial$get_randomization_queue()}}
\item \href{#method-Trial-get_enroll_time}{\code{Trial$get_enroll_time()}}
\item \href{#method-Trial-enroll_a_patient}{\code{Trial$enroll_a_patient()}}
\item \href{#method-Trial-enroll_patients}{\code{Trial$enroll_patients()}}
\item \href{#method-Trial-set_current_time}{\code{Trial$set_current_time()}}
\item \href{#method-Trial-get_current_time}{\code{Trial$get_current_time()}}
\item \href{#method-Trial-get_event_tables}{\code{Trial$get_event_tables()}}
\item \href{#method-Trial-get_data_lock_time_by_event_number}{\code{Trial$get_data_lock_time_by_event_number()}}
\item \href{#method-Trial-get_data_lock_time_by_calendar_time}{\code{Trial$get_data_lock_time_by_calendar_time()}}
\item \href{#method-Trial-get_locked_data}{\code{Trial$get_locked_data()}}
\item \href{#method-Trial-get_locked_data_name}{\code{Trial$get_locked_data_name()}}
\item \href{#method-Trial-get_event_number}{\code{Trial$get_event_number()}}
\item \href{#method-Trial-save_event_time}{\code{Trial$save_event_time()}}
\item \href{#method-Trial-get_event_time}{\code{Trial$get_event_time()}}
\item \href{#method-Trial-lock_data}{\code{Trial$lock_data()}}
\item \href{#method-Trial-event_plot}{\code{Trial$event_plot()}}
\item \href{#method-Trial-censor_trial_data}{\code{Trial$censor_trial_data()}}
\item \href{#method-Trial-save}{\code{Trial$save()}}
\item \href{#method-Trial-bind}{\code{Trial$bind()}}
\item \href{#method-Trial-save_custom_data}{\code{Trial$save_custom_data()}}
\item \href{#method-Trial-get_custom_data}{\code{Trial$get_custom_data()}}
\item \href{#method-Trial-get_output}{\code{Trial$get_output()}}
\item \href{#method-Trial-mute}{\code{Trial$mute()}}
\item \href{#method-Trial-independentIncrement}{\code{Trial$independentIncrement()}}
\item \href{#method-Trial-dunnettTest}{\code{Trial$dunnettTest()}}
\item \href{#method-Trial-closedTest}{\code{Trial$closedTest()}}
\item \href{#method-Trial-get_seed}{\code{Trial$get_seed()}}
\item \href{#method-Trial-print}{\code{Trial$print()}}
\item \href{#method-Trial-get_snapshot_copy}{\code{Trial$get_snapshot_copy()}}
\item \href{#method-Trial-make_snapshot}{\code{Trial$make_snapshot()}}
\item \href{#method-Trial-reset}{\code{Trial$reset()}}
\item \href{#method-Trial-clone}{\code{Trial$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-new"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-new}{}}}
\subsection{Method \code{new()}}{
initialize a trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$new(
  name,
  n_patients,
  duration,
  description = name,
  seed = NULL,
  enroller,
  dropout = NULL,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name}}{character. Name of trial.}

\item{\code{n_patients}}{integer. Maximum number of patients could be enrolled
to the trial.}

\item{\code{duration}}{Numeric. Trial duration.}

\item{\code{description}}{character. Optional for description of the trial. By
default it is set to be trial's \code{name}.}

\item{\code{seed}}{random seed. If \code{NULL}, \code{set.seed()} will not be
called, which uses seed set outside.}

\item{\code{enroller}}{a function returning a vector enrollment time for
patients. Its first argument is the number of enrolled patients.}

\item{\code{dropout}}{a function returning a vector of dropout time for
patients. Its first argument is the number of enrolled patients.}

\item{\code{...}}{arguments of \code{enroller} and \code{dropout}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_trial_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_trial_data}{}}}
\subsection{Method \code{get_trial_data()}}{
return trial data of enrolled patients at the time of this
function is called
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_trial_data()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_duration"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_duration}{}}}
\subsection{Method \code{get_duration()}}{
return maximum duration of a trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_duration()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-set_enroller"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-set_enroller}{}}}
\subsection{Method \code{set_enroller()}}{
set recruitment curve when initialize a
trial.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$set_enroller(func, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{func}}{function to generate enrollment time. It can be built-in
function like `rexp` or customized functions like `StaggeredRecruiter`.}

\item{\code{...}}{arguments for \code{func}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_enroller"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_enroller}{}}}
\subsection{Method \code{get_enroller()}}{
get function of recruitment curve
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_enroller()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-set_dropout"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-set_dropout}{}}}
\subsection{Method \code{set_dropout()}}{
set distribution of drop out time. This can be done when initialize a
trial, or when updating a trial in adaptive design.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$set_dropout(func, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{func}}{function to generate dropout time. It can be built-in
function like `rexp` or customized functions.}

\item{\code{...}}{arguments for \code{func}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_dropout"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_dropout}{}}}
\subsection{Method \code{get_dropout()}}{
get generator of dropout time
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_dropout()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-roll_back"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-roll_back}{}}}
\subsection{Method \code{roll_back()}}{
roll back data to current time of trial. By doing so,
\code{Trial$trial_data} will be cut at current time, and data after then
are deleted. However, \code{Trial$enroll_time} after current time are
kept unchanged because that is planned enrollment curve.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$roll_back()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-remove_arms"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-remove_arms}{}}}
\subsection{Method \code{remove_arms()}}{
remove arms from a trial. \code{enroll_patients()} will be always called
at the end to enroll all remaining patients after
\code{Trial$get_current_time()}. This function may be used with futility
analysis, dose selection, enrichment analysis (sub-population) or
interim analysis (early stop for efficacy)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$remove_arms(arms_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{arms_name}}{character vector. Name of arms to be removed.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-update_sample_ratio"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-update_sample_ratio}{}}}
\subsection{Method \code{update_sample_ratio()}}{
update sample ratio of an arm. This could happen after an arm is added
or removed. We may want to update sample ratio of unaffected arms as
well. This function can only update sample ratio for one arm at a time.
Once sample ratio is updated, trial data should be rolled back with
updated randomization queue. Data of unenrolled patients should be
re-sampled as well.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$update_sample_ratio(arm_name, sample_ratio)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{arm_name}}{character. Name of an arm of length 1.}

\item{\code{sample_ratio}}{integer. Sample ratio of the arm.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-add_arms"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-add_arms}{}}}
\subsection{Method \code{add_arms()}}{
add one or more arms to the trial. \code{enroll_patients()} will be
called at the end to enroll all remaining patients in
\code{private$randomization_queue}. This function can be used in two
scenarios.
(1) add arms right after a trial is created (i.e., \code{Trial$new(...)}).
\code{sample_ratio} and arms added through \code{...} should be of same
length.
(2) add arms to a trial already with arm(s)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$add_arms(sample_ratio, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{sample_ratio}}{integer vector. Sample ratio for permuted block
randomization. It will be appended to existing sample ratio in the trial.}

\item{\code{...}}{one or more objects of class \code{Arm}. One exception in
\code{...} is an argument \code{enforce}. When \code{enforce = TRUE},
sample ratio of newly added arm. It rolls back all patients after
\code{Trial$get_current_time()}, i.e. redo randomization for those
patients. This can be useful to add arms one by one when creating a trial.
Note that we can run \code{Trial$add_arm(sample_ratio1, arm1)} followed
by \code{Trial$add_arm(sample_ratio2, enforce = TRUE, arm2)}.
We would expected similar result with
\code{Trial$add_arms(c(sample_ratio1, sample_ratio2), arm1, arm2)}. Note
that these two method won't return exactly the same trial because
randomization_queue were generated twice in the first approach but only
once in the second approach. But statistically, they are equivalent and
of the same distribution.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_name"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_name}{}}}
\subsection{Method \code{get_name()}}{
return name of trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_name()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_description"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_description}{}}}
\subsection{Method \code{get_description()}}{
return description of trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_description()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_arms"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_arms}{}}}
\subsection{Method \code{get_arms()}}{
return a list of arms in the trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_arms()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_arms_name"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_arms_name}{}}}
\subsection{Method \code{get_arms_name()}}{
return arms' name of trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_arms_name()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_number_arms"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_number_arms}{}}}
\subsection{Method \code{get_number_arms()}}{
get number of arms in the trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_number_arms()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-has_arm"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-has_arm}{}}}
\subsection{Method \code{has_arm()}}{
check if the trial has any arm. Return \code{TRUE} or \code{FALSE}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$has_arm()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_an_arm"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_an_arm}{}}}
\subsection{Method \code{get_an_arm()}}{
return an arm
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_an_arm(arm_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{arm_name}}{character, name of arm to be extracted}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_sample_ratio"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_sample_ratio}{}}}
\subsection{Method \code{get_sample_ratio()}}{
return current sample ratio of the trial. The ratio can probably change
during the trial (e.g., arm is removed or added)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_sample_ratio(arm_names = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{arm_names}}{character vector of arms.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_number_patients"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_number_patients}{}}}
\subsection{Method \code{get_number_patients()}}{
return number of patients when planning the trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_number_patients()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_number_enrolled_patients"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_number_enrolled_patients}{}}}
\subsection{Method \code{get_number_enrolled_patients()}}{
return number of enrolled (randomized) patients
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_number_enrolled_patients()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_number_unenrolled_patients"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_number_unenrolled_patients}{}}}
\subsection{Method \code{get_number_unenrolled_patients()}}{
return number of unenrolled patients
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_number_unenrolled_patients()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_randomization_queue"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_randomization_queue}{}}}
\subsection{Method \code{get_randomization_queue()}}{
return randomization queue of planned but not yet enrolled patients.
This function does not update randomization_queue, just return its value
for debugging purpose.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_randomization_queue(index = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{index}}{index to be extracted. Return all queue if \code{NULL}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_enroll_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_enroll_time}{}}}
\subsection{Method \code{get_enroll_time()}}{
return enrollment time of planned but not yet enrolled patients.
This function does not update enroll_time, just return its value
for debugging purpose.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_enroll_time(index = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{index}}{index to extract. Return all enroll time if \code{NULL}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-enroll_a_patient"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-enroll_a_patient}{}}}
\subsection{Method \code{enroll_a_patient()}}{
assign a new patient to an arm based on planned randomization queue
I may consider make this function deprecated. Instead, I'd like to
have a function to sample the remaining n patients, with n as an argument.
Reason: if an action (analysis, add/remove arm, early stop) is triggered
based on number of event of TTE, we may need to sample ALL patients to
know the accurate time point. With an enrollment function of more than
one patient, we can find out the time point and roll back to then, and
recover randomization queue and enrollment time for the remaining patients.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$enroll_a_patient()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-enroll_patients"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-enroll_patients}{}}}
\subsection{Method \code{enroll_patients()}}{
assign new patients to pre-planned randomization queue at pre-specified
enrollment time.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$enroll_patients(n_patients = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{n_patients}}{number of new patients to be enrolled. If \code{NULL},
all remaining patients in plan are enrolled. Error may be triggered if
n_patients is greater than remaining patients as planned.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-set_current_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-set_current_time}{}}}
\subsection{Method \code{set_current_time()}}{
set current time of a trial. Any data collected before could not be
changed. private$now should be set after an event is triggered
(through Event class, futility, interim, etc), an arm is added or
removed as a result of an event
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$set_current_time(time)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{time}}{current calendar time of a trial.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_current_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_current_time}{}}}
\subsection{Method \code{get_current_time()}}{
return current time of a trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_current_time()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_event_tables"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_event_tables}{}}}
\subsection{Method \code{get_event_tables()}}{
count accumulative number of events (for TTE) or samples (otherwise) over
calendar time (enroll time + tte for TTE, or enroll time + readout otherwise)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_event_tables(arms = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{arms}}{a vector of arms' name on which the event tables are created.
if \code{NULL}, all arms in the trial will be used.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_data_lock_time_by_event_number"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_data_lock_time_by_event_number}{}}}
\subsection{Method \code{get_data_lock_time_by_event_number()}}{
given a set of endpoints and target number of events, determine the data
lock time for Event (futility, interim, final (?)). This function does
not change trial object (e.g. rolling back not yet randomized patients after
the found data lock time).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_data_lock_time_by_event_number(
  endpoints,
  arms,
  target_n_events,
  type = c("all", "any")
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{endpoints}}{character vector. Data lock time is determined by a set
of endpoints.}

\item{\code{arms}}{a vector of arms' name on which number of events will be
counted.}

\item{\code{target_n_events}}{target number of events for each of the
\code{endpoints}.}

\item{\code{type}}{\code{all} if all target number of events are reached.
\code{any} if the any target number of events is reached.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data lock time
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{## trial$get_data_lock_time_by_event_number(c('pfs','orr'), c(200,500), 'any')
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_data_lock_time_by_calendar_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_data_lock_time_by_calendar_time}{}}}
\subsection{Method \code{get_data_lock_time_by_calendar_time()}}{
given the calendar time to lock the data, return it with event counts of
each of the endpoints.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_data_lock_time_by_calendar_time(calendar_time, arms)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{calendar_time}}{numeric. Calendar time to lock the data}

\item{\code{arms}}{a vector of arms' name on which number of events will be
counted.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data lock time
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{## trial$get_data_lock_time_by_calendar_time(20)
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_locked_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_locked_data}{}}}
\subsection{Method \code{get_locked_data()}}{
return locked data for an event
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_locked_data(event_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{event_name}}{character, event name of which the locked data to be
extracted.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_locked_data_name"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_locked_data_name}{}}}
\subsection{Method \code{get_locked_data_name()}}{
return names of locked data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_locked_data_name()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_event_number"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_event_number}{}}}
\subsection{Method \code{get_event_number()}}{
return number of events at lock time
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_event_number(event_name = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{event_name}}{names of triggered events. Use all triggered events
if \code{NULL}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-save_event_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-save_event_time}{}}}
\subsection{Method \code{save_event_time()}}{
save time of a new event.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$save_event_time(event_time, event_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{event_time}}{numeric. Time of new event.}

\item{\code{event_name}}{character. Name of new event.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_event_time"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_event_time}{}}}
\subsection{Method \code{get_event_time()}}{
return event time when triggering a given event
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_event_time(event_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{event_name}}{character. Name of event.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-lock_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-lock_data}{}}}
\subsection{Method \code{lock_data()}}{
lock data at specific calendar time.
For time-to-event endpoints, their event indicator *_event should be
updated accordingly. Locked data should be stored separately.
DO NOT OVERWRITE/UPDATE private$trial_data! which can lose actual
time-to-event information. For example, a patient may be censored at
the first data lock. However, he may have event being observed in a
later data lock.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$lock_data(at_calendar_time, event_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{at_calendar_time}}{time point to lock trial data}

\item{\code{event_name}}{assign event name as the name of locked data for
future reference.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-event_plot"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-event_plot}{}}}
\subsection{Method \code{event_plot()}}{
plot of cumulative number of events/samples over calendar time.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$event_plot()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-censor_trial_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-censor_trial_data}{}}}
\subsection{Method \code{censor_trial_data()}}{
censor trial data at calendar time
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$censor_trial_data(censor_at = NULL, selected_arms = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{censor_at}}{time of censoring. It is set to trial duration if
\code{NULL}.}

\item{\code{selected_arms}}{censoring is applied to selected arms (e.g.,
removed arms) only. If \code{NULL}, it will be set to all available arms
in trial data. Otherwise, censoring is applied to user-specified arms only.
This is necessary because number of events/sample size in removed arms
should be fixed unchanged since corresponding event is triggered. In that
case, one can update trial data by something like
\code{censor_trial_data(censor_at = event_time, selected_arms = removed_arms)}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-save"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-save}{}}}
\subsection{Method \code{save()}}{
save a single value or a one-row data frame to trial's output
for further analysis/summary later.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$save(value, name = "", overwrite = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{value}}{value to be saved. It can be a vector (of length 1) or
a data frame (of one row).}

\item{\code{name}}{character to name the saved object. It will be used to
name a column in trial's output if \code{value} is a vector.
If \code{value} is a data frame, \code{name} will be the prefix pasted
with the column name of \code{value} in trial's output.
If user want to use
\code{value}'s column name as is in trial's output, set \code{name}
to be \code{''} as default. Otherwise, column name would be, e.g.,
\code{"{name}_<{names(value)}>"}.}

\item{\code{overwrite}}{logic. \code{TRUE} if overwriting existing entries
with warning, otherwise, throwing an error and stop.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-bind"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-bind}{}}}
\subsection{Method \code{bind()}}{
row bind a data frame to existing data frame. If \code{name} is not
existing in \code{Trial}, then it is equivalent to \code{Trial$save}.
Extra columns in \code{value} are ignored. Columns in
\code{Trial$custom_data[[name]]} but not in \code{value} are filled
with \code{NA}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$bind(value, name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{value}}{a data frame to be saved. It can consist of one or
multiple rows.}

\item{\code{name}}{character. Name of object to be saved.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-save_custom_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-save_custom_data}{}}}
\subsection{Method \code{save_custom_data()}}{
save arbitrary (number of) objects into a trial so that users can use
those to control the workflow. Most common use case is to store
simulation parameters to be used in action functions.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$save_custom_data(value, name, overwrite = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{value}}{value to be saved. Any type.}

\item{\code{name}}{character. Name of the value to be accessed later.}

\item{\code{overwrite}}{logic. \code{TRUE} if overwriting existing entries
with warning, otherwise, throwing an error and stop.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_custom_data"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_custom_data}{}}}
\subsection{Method \code{get_custom_data()}}{
return saved custom data of specified name.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_custom_data(name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name}}{character. Name of custom data to be accessed.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_output"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_output}{}}}
\subsection{Method \code{get_output()}}{
return a data frame of all current outputs saved by calling \code{save}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_output(cols = NULL, simplify = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{cols}}{columns to be returned from \code{Trial$output}. If
\code{NULL}, all columns are returned.}

\item{\code{simplify}}{logical. Return value rather than a data frame of one
column when \code{length(col) == 1} and \code{simplify == TRUE}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-mute"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-mute}{}}}
\subsection{Method \code{mute()}}{
mute all messages (not including warnings)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$mute(silent)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{silent}}{logical.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-independentIncrement"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-independentIncrement}{}}}
\subsection{Method \code{independentIncrement()}}{
calculate independent increments from a given set of events
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$independentIncrement(endpoint, placebo, events, planned_info, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{endpoint}}{character. Name of time-to-event endpoint in trial's
locked data.}

\item{\code{placebo}}{character. String of placebo in trial's locked data.}

\item{\code{events}}{a character vector of event names in the trial, e.g.,
\code{listener$get_event_names()}.}

\item{\code{planned_info}}{a vector of planned accumulative number of event of
time-to-event endpoint. Note: \code{planned_info} can also be a character
\code{"oracle"} so that planned number of events are set to be observed
number of events, in that case inverse normal z statistics equal to
one-sided logrank statistics. This is for the purpose of debugging only.
In formal simulation, \code{"oracle"} should not be used if adaptation
is present. Pre-fixed \code{planned_info} should be used to create
weights in combination test that controls the family-wise error rate
in the strong sense.}

\item{\code{...}}{subset condition that is compatible with \code{dplyr::filter}.
\code{survdiff} will be fitted on this subset only to compute one-sided
logrank statistics. It could be useful when a
trial consists of more than two arms. By default it is not specified,
all data will be used to fit the model.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
This function returns a data frame with columns:
\describe{
\item{\code{p_inverse_normal}}{one-sided p-value for inverse normal test
based on logrank test (alternative hypothesis: risk is higher in placebo arm).
Accumulative data is used. }
\item{\code{z_inverse_normal}}{z statistics of \code{p_inverse_normal}.
Accumulative data is used. }
\item{\code{p_lr}}{one-sided p-value for logrank test
 (alternative hypothesis: risk is higher in placebo arm).
Accumulative data is used. }
\item{\code{z_lr}}{z statistics of \code{p_lr}.
Accumulative data is used. }
\item{\code{info}}{observed accumulative event number. }
\item{\code{planned_info}}{planned accumulative event number. }
\item{\code{info_pbo}}{observed accumulative event number in placebo. }
\item{\code{info_trt}}{observed accumulative event number in treatment arm. }
\item{\code{wt}}{weights in \code{z_inverse_normal}. }
}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{
\dontrun{
trial$independentIncrement('pfs', 'pbo', listener$get_event_names(), 'oracle')
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-dunnettTest"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-dunnettTest}{}}}
\subsection{Method \code{dunnettTest()}}{
carry out closed test based on Dunnett method under group sequential
design.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$dunnettTest(endpoint, placebo, treatments, events, planned_info, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{endpoint}}{character of an endpoint for Dunnett test.}

\item{\code{placebo}}{character. Name of placebo arm.}

\item{\code{treatments}}{character vector. Name of treatment arms to be used in
comparison.}

\item{\code{events}}{character vector. Names of triggered events at which either
adaptation is applied or statistical testing for endpoint is performed.
Event in \code{events} does not need to be sorted by their triggering time.}

\item{\code{planned_info}}{a data frame of planned number of events of
time-to-event endpoint in each stage and each arm. Event names, i.e.,
\code{events} are row names of \code{planned_info}, and arm names, i.e.,
\code{c(placebo, treatments)} are column names.
Note that it is not the accumulative but stage-wise event numbers.
It is usually not easy to determine these numbers in practice, simulation
may be used to get estimates.
Note: \code{planned_info} can also be a character
\code{"default"} so that \code{planned_info} are set to be number
of newly randomized patients in the control arm in each of the stages.
This assumes that
event rate do not change over time and/or sample ratio between placebo
and a treatment arm does not change as well, which may not be true.
It is for the purpose of debugging or rapid implementation
only. Using simulation to pick \code{planned_info} is recommended in
formal simulation study.}

\item{\code{...}}{subset condition that is compatible with \code{dplyr::filter}.
\code{survdiff} will be fitted on this subset only to compute one-sided
logrank statistics. It could be useful when comparison is made on a
subset of treatment arms. By default it is not specified,
all data (placebo plus one treatment arm at a time) in the locked data
are used to fit the model.}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
This function computes stage-wise p-values for each of the intersection
hypotheses based on Dunnett test. If only one treatment arm is present,
it is equivalent to compute the stage-wise p-values of elemental
hypotheses. This function also computes inverse normal combination
test statistics at each of the stages.
The choice of \code{planned_info} can affect the calculation of
stage-wise p-values. Specifically, it is used to compute
the columns \code{observed_info} and \code{p_inverse_normal} in returned
data frame, which will be used in \code{Trial$closedTest()}.
The choice of \code{planned_info} can affect the result of
\code{Trial$closedTest()} so user should chose it with caution.

Note that in \code{Trial$closedTest()},
\code{observed_info}, which is derived from \code{planned_info}, will
lead to the same closed testing results up to a constant. This is because
the closed test uses information fraction
\code{observed_info/sum(observed_info)}. As a result, setting
\code{planned_info} to, e.g., \code{10 * planned_info} should give same
closed test results.

Based on numerical study, setting \code{planned_info = "default"} leads
to a much higher power (roughly 10\%) than setting \code{planned_info} to
median of event numbers at stages, which can be determined by simulation.
I am not sure if regulator would support such practice. For example,
if an event (e.g., interim analysis) is triggered at a pre-specified
calendar time, the number of randomized patients is random and is unknown
when planning the trial. If I understand it correctly, regulator may want
the information fraction in closed test (combined with Dunnett test) to
be pre-fixed. In addition, this choice for \code{planned_info} assumes
that the event rates does not change over time which is obviously not
true. It is recommended to always use pre-fixed \code{planned_info} for
restrict control of family-wise error rate. It should be pointed out
that the choice of pre-fixed \code{planned_info} can affect statistical
power significantly so fine-tuning may be required.
}

\subsection{Returns}{
a list with element names like \code{arm_name},
\code{arm1_name|arm2_name}, \code{arm1_name|arm2_name|arm3_name}, etc.,
i.e., all possible combination of treatment arms in comparison. Each
element is a data frame, with its column names self-explained. Specifically,
the columns \code{p_inverse_normal}, \code{observed_info},
\code{is_final} can be used with \code{GroupSequentialTest} to perform
significance test.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
trial$dunnettTest('pfs', 'pbo', c('high dose', 'low dose'), listener$get_event_names(), 'default')
}

}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-closedTest"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-closedTest}{}}}
\subsection{Method \code{closedTest()}}{
perform closed test based on Dunnett test
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$closedTest(
  dunnett_test,
  treatments,
  events,
  alpha,
  alpha_spending = c("asP", "asOF")
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{dunnett_test}}{object returned by \code{Trial$dunnettTest()}.}

\item{\code{treatments}}{character vector. Name of treatment arms to be used in
comparison.}

\item{\code{events}}{character vector. Names of triggered events at which
significance testing for endpoint is performed in closed test.
Event in \code{events} does not need to be sorted by their triggering time.}

\item{\code{alpha}}{numeric. Allocated alpha.}

\item{\code{alpha_spending}}{alpha spending function. It can be \code{"asP"} or
\code{"asOF"}. Note that theoretically it can be \code{"asUser"}, but
it is not tested. It may be supported in the future.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
a data frame of columns \code{arm}, \code{decision},
\code{event_at_reject}, and \code{reject_time}.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
dt <- trial$dunnettTest(
  'pfs', 'pbo', c('high dose', 'low dose'),
  listener$get_event_names(), 'default')

trial$closedTest(dt, c('high dose', 'low dose'),
                 c('pfs interim', 'pfs final'),
                 0.025, 'asOF')
}

}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_seed"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_seed}{}}}
\subsection{Method \code{get_seed()}}{
return random seed
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_seed()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-print"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-print}{}}}
\subsection{Method \code{print()}}{
print a trial
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$print()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-get_snapshot_copy"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-get_snapshot_copy}{}}}
\subsection{Method \code{get_snapshot_copy()}}{
return a snapshot of a trial before it is executed.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$get_snapshot_copy()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-make_snapshot"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-make_snapshot}{}}}
\subsection{Method \code{make_snapshot()}}{
make a snapshot before running a trial. This can be useful when
resetting a trial.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$make_snapshot()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-reset"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-reset}{}}}
\subsection{Method \code{reset()}}{
reset a trial to its snapshot taken before it was executed. Seed will be
reassigned with a new one. Enrollment time are re-generated. If the trial
already have arms when this function is called, they are added back to
recruit patients again.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$reset()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Trial-clone"></a>}}
\if{latex}{\out{\hypertarget{method-Trial-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Trial$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
