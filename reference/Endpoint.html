<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Class of Endpoint — Endpoint • TrialSimulator</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Class of Endpoint — Endpoint"><meta name="description" content="Create a class of endpoint to specify its name, type and assign a random number
generator."><meta property="og:description" content="Create a class of endpoint to specify its name, type and assign a random number
generator."><meta property="og:image" content="https://zhangh12.github.io/TrialSimulator/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TrialSimulator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.55.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/adaptiveDesign.html">An Example of Simulating a Trial with Adaptive Design</a></li>
    <li><a class="dropdown-item" href="../articles/comparisons.html">Comparisons with graphicalMCP and gMCP</a></li>
    <li><a class="dropdown-item" href="../articles/conditionSystem.html">Condition System for Triggering Events in a Trial</a></li>
    <li><a class="dropdown-item" href="../articles/defineNonTimeToEventEndpoints.html">Define Non-Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineTimeToEventEndpoints.html">Define Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/designDocument.html">Modular Clinical Trial Simulation: Overview of Core Functions and Workflow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Class of Endpoint</h1>

      <div class="d-none name"><code>Endpoint.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a class of endpoint to specify its name, type and assign a random number
generator.</p>
    </div>


    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-Endpoint-new"><code>Endpoint$new()</code></a></p></li>
<li><p><a href="#method-Endpoint-test_generator"><code>Endpoint$test_generator()</code></a></p></li>
<li><p><a href="#method-Endpoint-get_generator"><code>Endpoint$get_generator()</code></a></p></li>
<li><p><a href="#method-Endpoint-get_readout"><code>Endpoint$get_readout()</code></a></p></li>
<li><p><a href="#method-Endpoint-get_uid"><code>Endpoint$get_uid()</code></a></p></li>
<li><p><a href="#method-Endpoint-get_name"><code>Endpoint$get_name()</code></a></p></li>
<li><p><a href="#method-Endpoint-get_type"><code>Endpoint$get_type()</code></a></p></li>
<li><p><a href="#method-Endpoint-clone"><code>Endpoint$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-Endpoint-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>initialize an endpoint</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/Endpoint.html">Endpoint</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">name</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tte"</span>, <span class="st">"non-tte"</span><span class="op">)</span>, readout <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">generator</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>character vector. Name(s) of endpoint(s)</p></dd>


<dt><code>type</code></dt>
<dd><p>character vector. Type(s) of endpoint(s). It supports
<code>"tte"</code> for time-to-event endpoints, and <code>"non-tte"</code> for
all other types of endpoints (e.g., continous, binary, categorical,
or repeated measurement. <code>TrialSimulator</code> will do some verification if
an endpoint is of type <code>"tte"</code>. However, no special
manipulation is done for non-tte endpoints.</p></dd>


<dt><code>readout</code></dt>
<dd><p>numeric vector with name to be the non-tte endpoint(s).
<code>readout</code> should be specified for every non-tte endpoint. For
example, <code>c(endpoint1 = 6, endpoint2 = 3)</code>.  If all
endpoints are tte, <code>readout</code> can be <code>NULL</code>.</p></dd>


<dt><code>generator</code></dt>
<dd><p>a RNG function. Its first argument must be `n`, number of
patients. It must return a data frame of `n` rows. It support all
built-in random number generators in <code>stats</code>, e.g., <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">stats::rnorm</a></code>,
<code><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">stats::rexp</a></code>, etc. that with <code>n</code> as the argument for number of
observations. <code>generator</code> could be any custom functions as long as
(1) its first argument is <code>n</code>; and (2) it returns a vector of
length <code>n</code> or a data frame of <code>n</code> rows. Custom random number
generator can return data of more than one endpoint. This is useful
when users need to simulate correlated endpoints. The column names of
returned data frame should match to <code>name</code> exactly. If an endpoint
is of type <code>"tte"</code>, the custom <code>generator</code> should also return
a column as event indicator. For example, if <code>"pfs"</code> is <code>"tte"</code>,
then custom <code>generator</code> should return at least two columns
<code>"pfs"</code> and <code>"pfs_event"</code>. Usually <code>pfs_event</code> can be
all 1s if no censoring. Censoring can be specified later when defining
the <code>Trial</code> through argument <code>dropout</code>. See <code><a href="Trial.html">?Trial</a></code>.
Note that if covariates, e.g., biomarker, subgroup, are needed in
generating and analyzing trial data, they can be defined as
<code>Endpoint</code> as well.</p></dd>


<dt><code>...</code></dt>
<dd><p>optional arguments for <code>generator</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Endpoint-test_generator"></a><div class="section">
<h3 id="method-test-generator-">Method <code>test_generator()</code><a class="anchor" aria-label="anchor" href="#method-test-generator-"></a></h3>
<p>test random number generator of the endpoints. It returns an example
dataset.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">test_generator</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>integer. Number of random numbers generated from the generator.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Endpoint-get_generator"></a><div class="section">
<h3 id="method-get-generator-">Method <code>get_generator()</code><a class="anchor" aria-label="anchor" href="#method-get-generator-"></a></h3>
<p>return random number generator of an endpoint</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Endpoint-get_readout"></a><div class="section">
<h3 id="method-get-readout-">Method <code>get_readout()</code><a class="anchor" aria-label="anchor" href="#method-get-readout-"></a></h3>
<p>return readout function</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">get_readout</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Endpoint-get_uid"></a><div class="section">
<h3 id="method-get-uid-">Method <code>get_uid()</code><a class="anchor" aria-label="anchor" href="#method-get-uid-"></a></h3>
<p>return uid</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">get_uid</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Endpoint-get_name"></a><div class="section">
<h3 id="method-get-name-">Method <code>get_name()</code><a class="anchor" aria-label="anchor" href="#method-get-name-"></a></h3>
<p>return endpoints' name</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">get_name</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Endpoint-get_type"></a><div class="section">
<h3 id="method-get-type-">Method <code>get_type()</code><a class="anchor" aria-label="anchor" href="#method-get-type-"></a></h3>
<p>return endpoints' type</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">get_type</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Endpoint-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Example 1. Generate a time-to-event endpoint.</span></span></span>
<span class="r-in"><span><span class="co">## Two columns are returned, one for time, one for event (1/0, 0 for</span></span></span>
<span class="r-in"><span><span class="co">## A built-in RNG function is used to handle piecewise constant exponential</span></span></span>
<span class="r-in"><span><span class="co">## distribution</span></span></span>
<span class="r-in"><span><span class="va">risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  end_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">26.0</span>, <span class="fl">52.0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  piecewise_risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.01</span>, <span class="fl">0.381</span>, <span class="fl">0.150</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3.01</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pfs</span> <span class="op">&lt;-</span> <span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>name <span class="op">=</span> <span class="st">'pfs'</span>, type<span class="op">=</span><span class="st">'tte'</span>,</span></span>
<span class="r-in"><span>generator <span class="op">=</span> <span class="va">PiecewiseConstantExponentialRNG</span>,</span></span>
<span class="r-in"><span>risk <span class="op">=</span> <span class="va">risk</span>, endpoint_name <span class="op">=</span> <span class="st">'pfs'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pfs</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PiecewiseConstantExponentialRNG :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $risk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   end_time piecewise_risk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1    0.049291679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       10    0.049784596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       26    0.018780130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       52    0.007393752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $endpoint_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pfs"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 2. Generate continuous and binary endpoints using R's built-in</span></span></span>
<span class="r-in"><span><span class="co">## RNG functions, e.g. rnorm, rexp, rbinom, etc.</span></span></span>
<span class="r-in"><span><span class="va">ep1</span> <span class="op">&lt;-</span> <span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>         name <span class="op">=</span> <span class="st">'cd4'</span>, type <span class="op">=</span> <span class="st">'non-tte'</span>, generator <span class="op">=</span> <span class="va">rnorm</span>, readout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>cd4<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         mean <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ep2</span> <span class="op">&lt;-</span> <span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>         name <span class="op">=</span> <span class="st">'resp_time'</span>, type <span class="op">=</span> <span class="st">'non-tte'</span>, generator <span class="op">=</span> <span class="va">rexp</span>, readout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>resp_time<span class="op">=</span><span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         rate <span class="op">=</span> <span class="fl">4.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ep3</span> <span class="op">&lt;-</span> <span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>         name <span class="op">=</span> <span class="st">'orr'</span>, type <span class="op">=</span> <span class="st">'non-tte'</span>, readout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>orr<span class="op">=</span><span class="fl">3</span><span class="op">)</span>, generator <span class="op">=</span> <span class="va">rbinom</span>,</span></span>
<span class="r-in"><span>         size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">.4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ep1</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">1e4</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># compared to 1.2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.199141</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">ep1</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">1e4</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># compared to 1.0</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9865558</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">ep2</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">1e4</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># compared to 4.5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4.554779</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ep3</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">1e4</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># compared to 0.4</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3961</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## An example of piecewise constant exponential random number generator</span></span></span>
<span class="r-in"><span><span class="co">## Baseline hazards are piecewise constant</span></span></span>
<span class="r-in"><span><span class="co">## Hazard ratios are piecewise constant, resulting a delayed effect.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">run</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"survminer"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">run</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Please install 'survminer' to run this example."</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"survival"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">run</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Please install 'survival' to run this example."</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="va">run</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">risk1</span> <span class="op">&lt;-</span> <span class="va">risk</span></span></span>
<span class="r-in"><span><span class="va">ep1</span> <span class="op">&lt;-</span> <span class="fu">TrialSimulator</span><span class="fu">::</span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">'pfs'</span>, type<span class="op">=</span><span class="st">'tte'</span>,</span></span>
<span class="r-in"><span>  generator <span class="op">=</span> <span class="va">PiecewiseConstantExponentialRNG</span>,</span></span>
<span class="r-in"><span>  risk<span class="op">=</span><span class="va">risk1</span>, endpoint_name <span class="op">=</span> <span class="st">'pfs'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">risk2</span> <span class="op">&lt;-</span> <span class="va">risk1</span></span></span>
<span class="r-in"><span><span class="va">risk2</span><span class="op">$</span><span class="va">hazard_ratio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">.6</span>, <span class="fl">.4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ep2</span> <span class="op">&lt;-</span> <span class="fu">TrialSimulator</span><span class="fu">::</span><span class="va">Endpoint</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">'pfs'</span>, type<span class="op">=</span><span class="st">'tte'</span>,</span></span>
<span class="r-in"><span>  generator <span class="op">=</span> <span class="va">PiecewiseConstantExponentialRNG</span>,</span></span>
<span class="r-in"><span>  risk<span class="op">=</span><span class="va">risk2</span>, endpoint_name <span class="op">=</span> <span class="st">'pfs'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span><span class="va">tte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">ep1</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="va">ep2</span><span class="op">$</span><span class="fu">get_generator</span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">arm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, each <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">tte</span>, <span class="va">arm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sfit</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html" class="external-link">survfit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span>time <span class="op">=</span> <span class="va">pfs</span>, event <span class="op">=</span> <span class="va">pfs_event</span><span class="op">)</span> <span class="op">~</span> <span class="va">arm</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">survminer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggsurvplot.html" class="external-link">ggsurvplot</a></span><span class="op">(</span><span class="va">sfit</span>,</span></span>
<span class="r-in"><span>           data <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>           pval <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co"># Show p-value</span></span></span>
<span class="r-in"><span>           conf.int <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co"># Show confidence intervals</span></span></span>
<span class="r-in"><span>           risk.table <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co"># Add risk table</span></span></span>
<span class="r-in"><span>           palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="Endpoint-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Han Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

