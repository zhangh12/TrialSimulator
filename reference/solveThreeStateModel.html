<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Solve Parameters in a Three-State Ill-Death Model — solveThreeStateModel • TrialSimulator</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Solve Parameters in a Three-State Ill-Death Model — solveThreeStateModel"><meta name="description" content="The ill-death model consists of three states, initial, progression,
and death. It can be used to model the progression-free survival (PFS)
and overall survival (OS) in clinical trial simulation. It models the
correlation PFS and OS without assumptions on latent status and copula.
Also, it does not assume PFS and OS satisfy the proportional hazard assumption
simultaneously. The three-state ill-death model ensures a nice property that
PFS &amp;lt;= OS with probability one. However, it requires three hazard parameters
under the homogeneous Markov assumption. In practice, hazard parameters are
hard to specify intuitively especially when no trial data is available at
the planning stage.
This function reparametrizes the ill-death model in term of three parameters,
i.e. median of PFS, median of OS, and correlation between PFS and OS. The
output of this function, which consists of the three hazard parameters, can
be used to generate PFS and OS with desired property. It can be used with
the built-in data generator CorrelatedPfsAndOs3() when defining
endpoints in TrialSimulator.
For more information, refer to
this vignette."><meta property="og:description" content="The ill-death model consists of three states, initial, progression,
and death. It can be used to model the progression-free survival (PFS)
and overall survival (OS) in clinical trial simulation. It models the
correlation PFS and OS without assumptions on latent status and copula.
Also, it does not assume PFS and OS satisfy the proportional hazard assumption
simultaneously. The three-state ill-death model ensures a nice property that
PFS &amp;lt;= OS with probability one. However, it requires three hazard parameters
under the homogeneous Markov assumption. In practice, hazard parameters are
hard to specify intuitively especially when no trial data is available at
the planning stage.
This function reparametrizes the ill-death model in term of three parameters,
i.e. median of PFS, median of OS, and correlation between PFS and OS. The
output of this function, which consists of the three hazard parameters, can
be used to generate PFS and OS with desired property. It can be used with
the built-in data generator CorrelatedPfsAndOs3() when defining
endpoints in TrialSimulator.
For more information, refer to
this vignette."><meta property="og:image" content="https://zhangh12.github.io/TrialSimulator/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TrialSimulator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/actionFunctions.html">Specify Actions to Execute at Trial Milestones</a></li>
    <li><a class="dropdown-item" href="../articles/adaptiveDesign.html">An Example of Simulating a Trial with Adaptive Design</a></li>
    <li><a class="dropdown-item" href="../articles/conditionSystem.html">Condition System for Triggering Milestones in a Trial</a></li>
    <li><a class="dropdown-item" href="../articles/defineArms.html">Define and Summarize Arms in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineLongitudinalEndpoints.html">Define Longitudinal Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/defineNonTimeToEventEndpoints.html">Define Non-Time-to-Event Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/defineTimeToEventEndpoints.html">Define Time-to-Event Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/fixedDesign.html">An Example of Fixed Design with Two Correlated Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/responseAdaptive.html">Designs with Response-Adaptive Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/simulatePfsAndOs.html">Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/wrappers.html">Wrapper Functions of Common Statistical Methods in TrialSimulator</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zhangh12/TrialSimulator/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Solve Parameters in a Three-State Ill-Death Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/zhangh12/TrialSimulator/blob/main/R/solveThreeStateModel.R" class="external-link"><code>R/solveThreeStateModel.R</code></a></small>
      <div class="d-none name"><code>solveThreeStateModel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The ill-death model consists of three states, <code>initial</code>, <code>progression</code>,
and <code>death</code>. It can be used to model the progression-free survival (PFS)
and overall survival (OS) in clinical trial simulation. It models the
correlation PFS and OS without assumptions on latent status and copula.
Also, it does not assume PFS and OS satisfy the proportional hazard assumption
simultaneously. The three-state ill-death model ensures a nice property that
PFS &lt;= OS with probability one. However, it requires three hazard parameters
under the homogeneous Markov assumption. In practice, hazard parameters are
hard to specify intuitively especially when no trial data is available at
the planning stage.</p>
<p>This function reparametrizes the ill-death model in term of three parameters,
i.e. median of PFS, median of OS, and correlation between PFS and OS. The
output of this function, which consists of the three hazard parameters, can
be used to generate PFS and OS with desired property. It can be used with
the built-in data generator <code><a href="CorrelatedPfsAndOs3.html">CorrelatedPfsAndOs3()</a></code> when defining
endpoints in <code>TrialSimulator</code>.</p>
<p>For more information, refer to
<a href="https://zhangh12.github.io/TrialSimulator/articles/simulatePfsAndOs.html">this vignette</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">solveThreeStateModel</span><span class="op">(</span></span>
<span>  <span class="va">median_pfs</span>,</span>
<span>  <span class="va">median_os</span>,</span>
<span>  <span class="va">corr</span>,</span>
<span>  h12 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-median-pfs">median_pfs<a class="anchor" aria-label="anchor" href="#arg-median-pfs"></a></dt>
<dd><p>numeric. Median of PFS.</p></dd>


<dt id="arg-median-os">median_os<a class="anchor" aria-label="anchor" href="#arg-median-os"></a></dt>
<dd><p>numeric. Median of OS.</p></dd>


<dt id="arg-corr">corr<a class="anchor" aria-label="anchor" href="#arg-corr"></a></dt>
<dd><p>numeric vector. Pearson correlation coefficients between PFS and OS.</p></dd>


<dt id="arg-h-">h12<a class="anchor" aria-label="anchor" href="#arg-h-"></a></dt>
<dd><p>numeric vector. A set of hazard from progression to
death that may induce the target correlation <code>corr</code> given <code>median_pfs</code>
and <code>median_os</code>. <code>solveThreeStateModel()</code> will do a grid search to
find the best hazard parameters that matches to the medians of PFS and OS,
and their correlations.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame with columns:</p><dl><dt><code>corr</code></dt>
<dd><p>target Peason's correlation coefficients.</p></dd>

<dt><code>h01</code></dt>
<dd><p>hazard from stable to progression.</p></dd>

<dt><code>h02</code></dt>
<dd><p>hazard from stable to death.</p></dd>

<dt><code>h12</code></dt>
<dd><p>hazard from progression to death.</p></dd>

<dt><code>error</code></dt>
<dd><p>absolute error between target correlation and correlation
derived from <code>h01</code>, <code>h02</code>, and <code>h12</code>.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="CorrelatedPfsAndOs3.html">CorrelatedPfsAndOs3</a></span><span class="op">(</span><span class="fl">1e6</span>, h01 <span class="op">=</span> <span class="fl">.1</span>, h02 <span class="op">=</span> <span class="fl">.05</span>, h12 <span class="op">=</span> <span class="fl">.12</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">pfs</span>, <span class="va">dat</span><span class="op">$</span><span class="va">os</span><span class="op">)</span> <span class="co">## 0.65</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6467199</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">pfs</span><span class="op">)</span> <span class="co">## 4.62</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4.624702</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">os</span><span class="op">)</span> <span class="co">## 9.61</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9.601951</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## find h01, h02, h12 that can match to median_pfs, median_os and corr</span></span></span>
<span class="r-in"><span><span class="co">## should be close to h01 = 0.10, h02 = 0.05, h12 = 0.12 when corr = 0.65</span></span></span>
<span class="r-in"><span><span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu">solveThreeStateModel</span><span class="op">(</span>median_pfs <span class="op">=</span> <span class="fl">4.6</span>, median_os <span class="op">=</span> <span class="fl">9.6</span>,</span></span>
<span class="r-in"><span>                            corr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.7</span>, length.out<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ret</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   corr        h01        h02        h12        error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.50 0.08077106 0.06991311 0.07755102 0.0019725523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.55 0.08619848 0.06448569 0.08979592 0.0008271392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.60 0.09334966 0.05733451 0.10510204 0.0027808278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.65 0.10091413 0.04977004 0.12040816 0.0055098914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.70 0.11388735 0.03679682 0.14489796 0.0002066345</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Han Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

