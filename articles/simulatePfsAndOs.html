<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints in Clinical Trials • TrialSimulator</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints in Clinical Trials">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TrialSimulator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.94.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/adaptiveDesign.html">An Example of Simulating a Trial with Adaptive Design</a></li>
    <li><a class="dropdown-item" href="../articles/conditionSystem.html">Condition System for Triggering Milestones in a Trial</a></li>
    <li><a class="dropdown-item" href="../articles/defineArms.html">Define and Summarize Arms in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineLongitudinalEndpoints.html">Define Longitudinal Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineNonTimeToEventEndpoints.html">Define Non-Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineTimeToEventEndpoints.html">Define Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/fixedDesign.html">An Example of Fixed Design with Two Correlated Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/responseAdaptive.html">Designs with Response-Adaptive Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/simulatePfsAndOs.html">Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/wrappers.html">Wrapper Functions of Common Statistical Methods in TrialSimulator</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zhangh12/TrialSimulator/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints in Clinical Trials</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zhangh12/TrialSimulator/blob/main/vignettes/simulatePfsAndOs.Rmd" class="external-link"><code>vignettes/simulatePfsAndOs.Rmd</code></a></small>
      <div class="d-none name"><code>simulatePfsAndOs.Rmd</code></div>
    </div>

    
    
<p>Progression-free survival (PFS) and overall survival (OS) are
commonly used as confirmatory endpoints in clinical trials. These two
endpoints are typically highly correlated, and it is always the case
that PFS
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≤</mo><annotation encoding="application/x-tex">\leq</annotation></semantics></math>
OS. A reliable algorithm for simulating both PFS and OS is therefore of
great interest.</p>
<p>Several methods have been proposed to achieve this, but many rely on
latent variables or copula-based approaches, making it difficult to
interpret and specify model parameters in practical settings. In this
vignette, we do not aim to provide a comprehensive review of existing
methods. Instead, we focus on a three-state illness-death model
consisting of the following states: initial (0), progression (1), and
death (2). For more details, refer to Meller, Beyersmann, and Rufibach
(2019).</p>
<p><img src="three_state_ill_death_model.png" alt="A three-state ill-death model for PFS and OS.
" width="80%"></p>
<p>We consider the simplest case of the illness-death model, where all
transition hazards
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">h(t)</annotation></semantics></math>
are constant over time. A data generator of this model is implemented in
<code><a href="../reference/CorrelatedPfsAndOs3.html">TrialSimulator::CorrelatedPfsAndOs3()</a></code>, which can be used to
define endpoints in <code><a href="../reference/endpoint.html">TrialSimulator::endpoint()</a></code>.</p>
<p>Marginally, the survival functions of PFS and OS are given by</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">PFS</mtext><mo>&gt;</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mi>t</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">
\Pr(\mbox{PFS} &gt; t) = \exp\{-(h_{01} + h_{02})t\}
</annotation></semantics></math></p>
<p>and</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">OS</mtext><mo>&gt;</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mi>t</mi><mo stretchy="false" form="postfix">}</mo><mo>+</mo><mfrac><msub><mi>h</mi><mn>01</mn></msub><mrow><msub><mi>h</mi><mn>12</mn></msub><mo>−</mo><msub><mi>h</mi><mn>01</mn></msub><mo>−</mo><msub><mi>h</mi><mn>02</mn></msub></mrow></mfrac><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mi>t</mi><mo stretchy="false" form="postfix">}</mo><mo>−</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><msub><mi>h</mi><mn>12</mn></msub><mi>t</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">
\Pr(\mbox{OS} &gt; t)  = \exp\{-(h_{01} + h_{02})t\} + \frac{h_{01}}{h_{12}-h_{01}-h_{02}}\exp\{-(h_{01} + h_{02})t\} - \exp\{-h_{12}t\}
</annotation></semantics></math></p>
<p>Thus, PFS follows an exponential distribution with rate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub></mrow><annotation encoding="application/x-tex">h_{01} + h_{02}</annotation></semantics></math>,
which is also referred to as the all-cause hazard. Given the transition
hazards
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>,</mo><msub><mi>h</mi><mn>02</mn></msub><mo>,</mo><msub><mi>h</mi><mn>12</mn></msub></mrow><annotation encoding="application/x-tex">h_{01}, h_{02}, h_{12}</annotation></semantics></math>,
a patient’s trajectory can be simulated using the following
algorithm:</p>
<ul>
<li><p><strong>Step 1</strong>. Generate the time to progression
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mn>01</mn></msub><annotation encoding="application/x-tex">t_{01}</annotation></semantics></math>
from an exponential distribution with rate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub></mrow><annotation encoding="application/x-tex">h_{01} + h_{02}</annotation></semantics></math>.</p></li>
<li><p><strong>Step 2</strong>. Draw a Bernoulli sample with success
probability
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><msub><mi>h</mi><mn>02</mn></msub><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub></mrow></mfrac><annotation encoding="application/x-tex">\frac{h_{02}}{h_{01} + h_{02}}</annotation></semantics></math>.
If successful, the patient dies immediately, i.e., time to death
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>02</mn></msub><mo>=</mo><msub><mi>t</mi><mn>01</mn></msub></mrow><annotation encoding="application/x-tex">t_{02} = t_{01}</annotation></semantics></math>,
and the simulation ends. Otherwise, proceed to Step 3.</p></li>
<li><p><strong>Step 3</strong>. Generate the time from progression to
death
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>t</mi><mn>12</mn></msub><annotation encoding="application/x-tex">t_{12}</annotation></semantics></math>
from an exponential distribution with rate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>12</mn></msub><annotation encoding="application/x-tex">h_{12}</annotation></semantics></math>.
Then, time to death
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>02</mn></msub><mo>=</mo><msub><mi>t</mi><mn>01</mn></msub><mo>+</mo><msub><mi>t</mi><mn>12</mn></msub></mrow><annotation encoding="application/x-tex">t_{02} = t_{01} + t_{12}</annotation></semantics></math>,
and the simulation ends.</p></li>
</ul>
<div class="section level2">
<h2 id="reparameterization">Reparameterization<a class="anchor" aria-label="anchor" href="#reparameterization"></a>
</h2>
<p>Although statistical methods exist for estimating transition hazards
when data are available (e.g., the R package <code>simIDM</code>), in
simulation studies for trial planning, it is common to specify these
hazard parameters based on limited information. A more intuitive way to
define PFS and OS is through their medians and correlation coefficient.
In this section, we describe a reparameterization strategy that maps the
medians and correlation to the transition hazards.</p>
<p>Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mn>1</mn></msub><annotation encoding="application/x-tex">m_1</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mn>2</mn></msub><annotation encoding="application/x-tex">m_2</annotation></semantics></math>
denote the medians of PFS and OS, respectively. Then we have</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo>=</mo><mfrac><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msub><mi>m</mi><mn>1</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">h_{01} + h_{02} = \frac{\log(2)}{m_1} \tag{1}</annotation></semantics></math></p>
<p>and</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>=</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>m</mi><mn>2</mn></msub><mo stretchy="false" form="postfix">}</mo><mo>+</mo><mfrac><msub><mi>h</mi><mn>01</mn></msub><mrow><msub><mi>h</mi><mn>12</mn></msub><mo>−</mo><msub><mi>h</mi><mn>01</mn></msub><mo>−</mo><msub><mi>h</mi><mn>02</mn></msub></mrow></mfrac><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>01</mn></msub><mo>+</mo><msub><mi>h</mi><mn>02</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>m</mi><mn>2</mn></msub><mo stretchy="false" form="postfix">}</mo><mo>−</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><msub><mi>h</mi><mn>12</mn></msub><msub><mi>m</mi><mn>2</mn></msub><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">
\frac{1}{2} = \exp\{-(h_{01} + h_{02})m_2\} + \frac{h_{01}}{h_{12}-h_{01}-h_{02}}\exp\{-(h_{01} + h_{02})m_2\} - \exp\{-h_{12}m_2\}
</annotation></semantics></math> Through algebraic manipulation, we
obtain</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>=</mo><mfrac><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>−</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow><mfrac><msub><mi>m</mi><mn>2</mn></msub><msub><mi>m</mi><mn>1</mn></msub></mfrac><mo stretchy="false" form="postfix">}</mo><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mn>12</mn></msub><mo>−</mo><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow><mfrac><mn>1</mn><msub><mi>m</mi><mn>1</mn></msub></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow><mfrac><msub><mi>m</mi><mn>2</mn></msub><msub><mi>m</mi><mn>1</mn></msub></mfrac><mo stretchy="false" form="postfix">}</mo><mo>−</mo><mo>exp</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><msub><mi>h</mi><mn>12</mn></msub><msub><mi>m</mi><mn>2</mn></msub><mo stretchy="false" form="postfix">}</mo><mo stretchy="true" form="postfix">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">
h_{01} = \frac{(\frac{1}{2} - \exp\{-\log(2) \frac{m_2}{m_1}\}) (h_{12} - \log(2) \frac{1}{m_1})}{
      (\exp\{-\log(2) \frac{m_2}{m_1}\} - \exp\{-h_{12} m_2\})}
      \tag{2}
</annotation></semantics></math></p>
<p>This implies that, for given medians
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mn>1</mn></msub><annotation encoding="application/x-tex">m_1</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mn>2</mn></msub><annotation encoding="application/x-tex">m_2</annotation></semantics></math>,
we can perform a grid search over values of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>12</mn></msub><annotation encoding="application/x-tex">h_{12}</annotation></semantics></math>.
For each candidate value, we compute
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>01</mn></msub><annotation encoding="application/x-tex">h_{01}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>02</mn></msub><annotation encoding="application/x-tex">h_{02}</annotation></semantics></math>
using equations (1) and (2), respectively. Then, we simulate a large
dataset using <code><a href="../reference/CorrelatedPfsAndOs3.html">TrialSimulator::CorrelatedPfsAndOs3()</a></code> and
calculate the Pearson correlation between PFS and OS. We select the
value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>12</mn></msub><annotation encoding="application/x-tex">h_{12}</annotation></semantics></math>
(and the corresponding
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>,</mo><msub><mi>h</mi><mn>02</mn></msub></mrow><annotation encoding="application/x-tex">h_{01}, h_{02}</annotation></semantics></math>)
that yields the desired correlation.</p>
<p>This reparameterization of the three-state illness-death model
enables us to specify correlated PFS and OS based on their medians and
correlation, which is more interpretable and practical in clinical trial
design. The <code>TrialSimulator</code> package provides a dedicated
function, <code>solveThreeStateModel</code>, to facilitate this
process.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Suppose we aim to simulate PFS with a median of 5 and OS with a
median of 12, targeting a correlation of 0.6 between them.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solveThreeStateModel.html">solveThreeStateModel</a></span><span class="op">(</span>median_pfs <span class="op">=</span> <span class="fl">5</span>, median_os <span class="op">=</span> <span class="fl">12</span>, </span>
<span>                             corr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.55</span>, <span class="fl">.65</span>, by <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span>, </span>
<span>                             h12 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.15</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pars</span><span class="op">)</span></span>
<span><span class="co">#&gt;   corr       h01        h02        h12       error</span></span>
<span><span class="co">#&gt; 1 0.55 0.0997785 0.03885093 0.08877551 0.001158721</span></span>
<span><span class="co">#&gt; 2 0.60 0.1080742 0.03055522 0.10102041 0.003826014</span></span>
<span><span class="co">#&gt; 3 0.65 0.1214222 0.01720720 0.11938776 0.004866790</span></span>
<span><span class="co">#&gt; Warning: Removed 3 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_segment()`).</span></span></code></pre></div>
<p><img src="simulatePfsAndOs_files/figure-html/laiela-1.png" width="100%"></p>
<p>The result suggests that using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>01</mn></msub><mo>=</mo><mn>0.11</mn></mrow><annotation encoding="application/x-tex">h_{01} = 0.11</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>02</mn></msub><mo>=</mo><mn>0.03</mn></mrow><annotation encoding="application/x-tex">h_{02} = 0.03</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>12</mn></msub><mo>=</mo><mn>0.10</mn></mrow><annotation encoding="application/x-tex">h_{12} = 0.10</annotation></semantics></math>
may achieve the desired specifications. To verify this, we simulate PFS
and OS data using</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pfs_and_os</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endpoint.html">endpoint</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'pfs'</span>, <span class="st">'os'</span><span class="op">)</span>, </span>
<span>                       type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'tte'</span>, <span class="st">'tte'</span><span class="op">)</span>, </span>
<span>                       generator <span class="op">=</span> <span class="va">CorrelatedPfsAndOs3</span>, </span>
<span>                       h01 <span class="op">=</span> <span class="fl">.11</span>, h02 <span class="op">=</span> <span class="fl">.03</span>, h12 <span class="op">=</span> <span class="fl">.10</span>, </span>
<span>                       pfs_name <span class="op">=</span> <span class="st">'pfs'</span>, os_name <span class="op">=</span> <span class="st">'os'</span><span class="op">)</span></span>
<span><span class="va">pfs_and_os</span></span></code></pre></div>
<iframe src="data:text/html;charset=utf-8;base64,CjwhRE9DVFlQRSBodG1sPgo8aHRtbD4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+RW5kcG9pbnRzICgyKTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICB9CiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogYmxhY2s7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICAgIH0KICAgICAgICAuc3VidGl0bGUgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgfQogICAgICAgIHRhYmxlIHsKICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5OwogICAgICAgICAgICB3aWR0aDogYXV0bzsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgfQogICAgICAgIHRoIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsKICAgICAgICAgICAgY29sb3I6IGJsYWNrOwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5OwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgfQogICAgICAgIHRkIHsKICAgICAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIH0KICAgICAgICAubm8tY29sIHsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgIH0KICAgICAgICAudmFyaWFibGUtY29sIHsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICB9CiAgICAgICAgLnN0YXRzLWNvbCB7CiAgICAgICAgfQogICAgICAgIC5mcmVxcy1jb2wgewogICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICB9CiAgICAgICAgLmdyYXBoLWNvbCB7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDsKICAgICAgICB9CiAgICAgICAgaW1nIHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+RW5kcG9pbnRzICgyKTwvaDE+CiAgICA8ZGl2IGNsYXNzPSJzdWJ0aXRsZSIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4KICAgICAgICBwZnMsIG9zPGJyPgogICAgPC9kaXY+CgogICAgPHRhYmxlPgogICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJuby1jb2wiPk5vPC90aD4KICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0idmFyaWFibGUtY29sIj5WYXJpYWJsZTwvdGg+CiAgICAgICAgICAgICAgICA8dGggY2xhc3M9InN0YXRzLWNvbCI+U3RhdHMgLyBGcmVxczwvdGg+CiAgICAgICAgICAgICAgICA8dGggY2xhc3M9ImdyYXBoLWNvbCI+R3JhcGg8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgIDwvdGhlYWQ+CiAgICAgICAgPHRib2R5PgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9Im5vLWNvbCI+MTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InZhcmlhYmxlLWNvbCI+cGZzPGJyPlt0aW1lLXRvLWV2ZW50XTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InN0YXRzLWNvbCI+TWVkaWFuIHRpbWU6IDU8YnI+RXZlbnRzOiAxMDAwMDxicj5NaXNzaW5nOiAwICgwJSk8L3RkPgogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJncmFwaC1jb2wiPjxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUhnQUFBQlFDQU1BQUFEbFJVRzdBQUFDL1ZCTVZFVUFBQUFIQndjSUNBZ0pDUWtLQ2dvTEN3c01EQXdPRGc0UER3OFJFUkVTRWhJVEV4TVVGQlFWRlJVV0ZoWVhGeGNZR0JnWkdSa2FHaG9iR3hzY0hCd2RIUjBnSUNBaElTRWlJaUlqSXlNa0pDUWxKU1VuSnljcEtTa3FLaW91TGk0dkx5OHhNVEV6TXpNME5EUTFOVFUzTnpjNE9EZzZPam84UER3OVBUMCtQajQvUHo5QVFFQkNRa0pEUTBORVJFUkdSa1pJU0VoSlNVbEtTa3BMUzB0TVRFeE5UVTFRVUZCUlVWRlNVbEpWVlZWWVdGaFpXVmxiVzF0Y1hGeGRYVjFnWUdCalkyTmtaR1JsWldWbVptWm5aMmRvYUdocGFXbHJhMnR0YlcxdmIyOXljbkp6YzNOMmRuWjNkM2Q1ZVhsNmVucDdlM3Q4Zkh5QWdJQ0JnWUdDZ29LRGc0T0ZuTmlHaG9hSGg0ZUlpSWlKaVltS2lhT0tpb3FMaTR1TWpJeU5qWTJQajQrUWtKQ1NpblNXbHBhWGw1ZVptWm1abmEyYm01dWNuSnllbnA2Z29LQ2hvYUdpb3FLam82T2tvYlNtcHFhbm5MdW5wNmVvbXJxb3FLaXBxYW1xbTdxcXFxcXJxNnVycmE2dHBidXVxc0N1cnE2dnI2K3Zzc3V2dGMyeHNiR3lzckt6czdPMHRMUzF0cmEyc01XMnRyYTNwYlMzdDdlM3Z0UzRwS0s0c3NlNHVMaTR1Ym00dTlDNXVicTV2OVc3dTd1OG9adTh2THk5dmIyOXllQzkwT2krcGJPK3FiTy9wTEsvdjcvQXJMWEF3TURBMCtyQndjSEMrZi9EdzhQRXJaZkV4TVRHc2E3R3hzYkl5TWpKeWNuS3lzckx5OHZMME0zTXpNek5zNjNOemMzTjBzN096czdQdUxUUHo4L1F6YzNSdXJmUisvL1MwdExVMU5UVjFkWFcxdGJXMmZIWDE5Zll0Ny9ZMk5qWi9QL2IyOXZiL1AvZDNkM2YvUC9nNE9EZy9QL2g0ZUhpemREaTR1TGo0K1BrNU9UbDVlWG16cnptK3ZMbS9mL241K2ZuL2YvbzBiL281ZWpvNk9qby9mL3A2ZW5yNit2czNPTHM2dXpzN096cy92L3Q2dGp1N3U3dS92L3Y3Ky92L3YvdzhQRHcrZi95K3YveS8vL3o2dXp6OC9QMDlQVDArLy8xMTdEMTlmWDE5djcyOXZiMzkvZjQrUGo1K2ZuNS8vLzY4dTc2K3ZyNi8vLzcrL3Y3Ly8vODl2RDgvUHo5NXVQOS9mMys2YjcrN3V6Ky92Ny8rTzcvK2ZILytmai8rL1QvLy9mLy8vOGU2czBjQUFBQUNYQklXWE1BQUE3REFBQU93d0hIYjZoa0FBQURRMGxFUVZSb2dlM1llVnlMY1J3SDhCRWRscEtreVpFY01ZdENpYm1KcE1zdFJTbVpJM0ptanB3bG9SQzVjaC9KZmVkbUNKVXpSKzR6WnlFNVJzajNaYTMydE4vVHNpMzdQYjkvOXYxbnoyZlA4M3U5OS9wdHY5L3o3TXNDUXNYU3dvekJlZW12eU1DVGRxdzhSQVJPalZqK1hCYUN2VHdBVWhLWWdRRitQSlFGLzI3NkFCSE5tSUcvajFsMGswb3BsUUhTakptQi83eVZTL2t3bUlzWWdaRWtoZmtoaEdCdmQwTHdXaTRoT0ZQM1BSa1lHbXdrQkx0N013RXZIVGIxRkEyZWJjOEV2R3ZLakd1eUlJcVViaDRQMkRrTXdBRGZyc2dDMzFKSCttcTltUUY0VGZUQzgxUXFtR3J3WW1BbHMvYUZ6NzlIaDdkYk1RQWpxUkFXRzkwaUEwUHJVWVRnVUFkQzhFdjJFekl3OE1jU2dvUGJZSWNQYkptSlB2cEk2N1poTm01NDA4QnBaNHJEd0l2RkRjdHZtVno5TXJKRFh4ZmM4TUhvSmRUTzllYW9pZXd3eVJUempZSzFLbnp1V1NvVlRUWHc1bUNHa1NRSGoyNUJDTTZxbUV3R0JqZTg5OGFTNFl0R21XUmdjQnhLQ0k2M0VPT0V2OXcvOWtFeEROenhPT0hYUS9vL0xnR09yZkVWSXd3LzcxQmJwcXVETG5LU094a2pmSDN4dXMreUVDY3dSRTZHV2VYaWd5ZnNXVjNVZkVHbkduTHI0dnVXV2I5dVBDMUtOQmppTExLd3dVaWl3K0RZbHhDY3hENU5Cb1lBYTB4TFNobWNhek9BREF6bmpQSDhkV1I5ZlBhN3BDMnpvR2FaWGNJQ2oxc3diOE0vWVJoYzZ4RU8rTUxsRTFRcllycFBCVVhYZE9lOXd3RG5wYitnbXFqOTJ1a3B1a2JjdmxHRzVtR2tYNjF3cWlXeWMyMk5MMmRXYXNTS1Q4cGdnQkhHUVJwZXowcVhVMkh0YnNoTElnS0QySS9kVTVPL2JwVmh5V05uUjRNQXpYVTUxWUFCVHRxYmVPelYwTE9CV2pCQW9uczFNeGVoSnFaY1RWaFNod2MxMWJQekRFbjh6eTZKd3M2ZXNzb0k3ZDJ5Wm5sam0wNCt3Y3VPM3kzZDNDT2R2YlN0bGRRWW1od2I2TmFXVjkyQVZjN2NzcDZ0UGI5REY0OCtmZ0tCUUNnVVJzVklhdjFPZW9sRW9xc1VMTjhSYUY2MVNtaytmSVpvZjBKTW1IQmtvSGN2VnllbnpudyszODVXVXR3NjlPSndPRTBvR0pscUJndHRvdWFYdndFSEtYTWROSFAwVGRGc29uVEFSRVZ3c1hlQ1dvbVFPbElXemFMR3c5SHNTeHVRcUVNZkVLWVNIT1dKNXB6NnRBdWM0OUVjMlFQTjJmUUJYYmVwQkROVVdsZ0xhMkV0cklWVnJyK1dvOEN4VFUyckNnQUFBQUJKUlU1RXJrSmdnZz09IiBhbHQ9IktNIGN1cnZlIj48L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9Im5vLWNvbCI+MjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InZhcmlhYmxlLWNvbCI+b3M8YnI+W3RpbWUtdG8tZXZlbnRdPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ic3RhdHMtY29sIj5NZWRpYW4gdGltZTogMTIuMDk8YnI+RXZlbnRzOiAxMDAwMDxicj5NaXNzaW5nOiAwICgwJSk8L3RkPgogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJncmFwaC1jb2wiPjxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUhnQUFBQlFDQU1BQUFEbFJVRzdBQUFDOTFCTVZFVUhCd2NKQ1FrS0Nnb0xDd3NNREF3TkRRME9EZzRQRHc4UkVSRVNFaElURXhNVUZCUVdGaFlYRnhjWUdCZ1pHUmthR2hvYkd4c2NIQndkSFIwZUhoNGZIeDhnSUNBaElTRWlJaUlqSXlNa0pDUWxKU1VuSnljcEtTa3FLaW9yS3lzc0xDd3RMUzB1TGk0dkx5OHdNREF4TVRFeU1qSXpNek0wTkRRNU9UazZPam84UER3OVBUMCtQajVBUUVCQlFVRkNRa0pEUTBORVJFUkdSa1pIUjBkS1NrcE1URXhOVFUxUFQwOVJVVkZTVWxKVVZGUlZWVlZZV0ZoY1hGeGRYVjFmWDE5Z1lHQmhZV0ZpWW1KalkyTmxaV1ZtWm1ab2FHaHJhMnR0YlcxeGNYRnljbkowZEhSMWRYVjNkM2Q0ZUhoNWVYbDlmWDErZm41L2YzK0JnWUdDZ29LRGc0T0VoSVNGaFlXRm5OaUdob2FJaUlpSmlZbUtpYU9LaW9xTWpJeU5qWTJPam82UGo0K1FrSkNSa1pHU2luU1dscGFabVptWm5hMmJtNXVjbkp5ZW5wNmdvS0Nob2FHam82T2tvYlNrcEtTbXBxYW5uTHVucDZlb21ycXFtN3FxcXFxcnJhNnRwYnV0cmEydXFzQ3ZyNit2c3N1dnRjMndzTEN6czdPMHRMUzF0cmEyc01XMnRyYTNwYlMzdDdlM3Z0UzRwS0s0c3NlNHVMaTR1Ym00dTlDNXVicTV2OVc2dXJxN3U3dThvWnU4dkx5OXZiMjl5ZUM5ME9pK3BiTytxYk8vcExLL3Y3L0FyTFhBd01EQTArckJ3Y0hDd3NMQytmL0R3OFBFclpmRnhjWEdzYTdHeHNiSHg4Zkl5TWpKeWNuTHk4dkwwTTNNek16TnM2M056YzNOMHM3UHVMVFF6YzNRME5EUnVyZlIwZEhSKy8vUzB0TFQwOVBVMU5UVzF0YlcyZkhYMTlmWXQ3L1oyZG5aL1AvYjI5dmIvUC9jM056ZDNkM2UzdDdmMzkvZi9QL2cvUC9oNGVIaXpkRGk0dUxrNU9UbDVlWG16cnptNXVibSt2TG0vZi9uNStmbi9mL28wYi9vNWVqbzZPam8vZi9yNit2czNPTHM2dXpzN096cy92L3Q2dGp0N2UzdTd1N3Uvdi92Nysvdi92L3c4UER3K2YveDhmSHkrdi95Ly8vejZ1ejA5UFQwKy8vMTE3RDE5ZlgxOXY3NCtQajUvLy82OHU3Nit2cjYvLy83Ky92Ny8vLzg5dkQ4L1B6OTV1UDkvZjMrNmI3Kzd1eisvdjcvK083LytmSC8rZmovKy9ULy8vZi8vLzk4Q29DNUFBQUFDWEJJV1hNQUFBN0RBQUFPd3dISGI2aGtBQUFESGtsRVFWUm9nZTNZYVZSTVlSZ0g4Skdsa2lsazZtb2hXVUpFV1FvWlMvYVNwWWhCS0VTU0piSkhzbWJmMTJRTENka0tTV05YV1VQMmZWOWp4Q0RQQjZNeGQrYTljMmVham5udisyWCtIK2JjLzl3NzV6Zm5QWGZlTS9maEFhSHdEREJuY0VIdUt6THdoTjJyRHhHQnMySldQbGVVY0pFdlFPWk9ibUNBN3c4VUphaVRNY0F1ZTI3Z2I2TVgzcUJiWm5uWmkrTnlUdURmYjFWYUlSemFraE1ZYVlYdzA3TDN5Y0FnRENVRXoyaEFDTTZyY0pvTURKMERDY0Z4ZFRpQWx3MmZkSUlKU3poWWE5NmVpZE91S29wNERsOSs0TjBIUHd6dzliS2llRHFXa0I4azFNUVByNCtkZjVadS81WWFwTlFSN1BDKzZMbDMxR0R3OThFT0k0MkdNd1NFWUxBL1NBanUyWjBRbkVKSnljQlFLNEVRSE9DTEdkNi9iVHJqcjQ4OEtiYVk0UzBEcHB4a2c2RnFJbDVZZGN1c1o2eXk4djU0NzJ2ZWdkakY5TTcxSnRWQ2VTYlZCaSs4Sm5yV0dicXBMalU0N01BS0l3MkJSVmp2YXkxd3NoMGhHQnh3UGtWcGd3ZTJJd1RmeHZsSW9RMkdOb014d2wvdUhuMnZDVTRTNU9HRFh3L3QrMGdUREc2ajhNSHc0eGE5WlhvM0xZV2UzV1Fud1FaZlc3VHhzNktzQ3pGam5IYU93Z2FQMzd0V09YeGhMalZFTk1RRy83eitSTm5VWUlsTkhDNFlhV293akdoTUNQNUl4Wk9CWVl3VG50OXlrYkRVWlJBWkdETE0wckRBSDU3OTByaGx5ak9rZmo0T2VOeTgyWnUxd3hLWHJqamc4NWVPMDZPSXFmMU4yYTY1UjJFWWZQRUtjbC9RUTlUZXdqS3NGNldYMC84MmdzNnJXWmRhbHBtQ0hMM0RXVEdyUGhVSlE0L2FWL1FOSTAwakxPMWxmWXdJREJET2p5QURRN0t0NTBVaU1MenpNL043U0FJR09PVmwybjZKbnJheFlzRUEyWUUxK0czSFp1c0RacDNzYVV0NmNET1R5aDVkUnNhZmUvbGZzT3BrTDJlN3VVNGZ5aytMREd4VjE5S290SFYxZDY5dS9ZYUZoRVV1bFNVK2tUMkh4Y3JRMndFeUVXaGlWYkZZMy9xeE9Da3FWT1Ric1VQckZtNnlPRHV4cHhxbGpDc05JMHZOWWRBaDZ0OEVtVkJJQkNYUlRobFpvZDNFQXUxOFU3UlhzbUtGMWQ0SmF5NUdzc0VTN1dMenJXaDNEMGE3dnhEdE1WVjBneGN3cGowM0d6RXVjR1U4dlBxc1FQdmtBTFJmOE5BTjVpZ0cyQUFiWUFOc2dIWE9IMG1TZk5PTkJQcGJBQUFBQUVsRlRrU3VRbUNDIiBhbHQ9IktNIGN1cnZlIj48L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9Im5vLWNvbCI+MzwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InZhcmlhYmxlLWNvbCI+cGZzX2V2ZW50PGJyPltldmVudCBpbmRpY2F0b3JdPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ic3RhdHMtY29sIj4xOiAxMDAwMCAoMTAwJSk8YnI+TWlzc2luZzogMCAoMCUpPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZ3JhcGgtY29sIj48aW1nIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFIZ0FBQUFvQ0FNQUFBQUNOTTRYQUFBQUxWQk1WRVdabVptb3FLaXJxNnV0cmEyd3NMQzJ0cmE1dWJtL3Y3L0l5TWpOemMzVDA5UGYzOS9sNWVYcjYrdi8vLy9UK3NRK0FBQUFDWEJJV1hNQUFBN0RBQUFPd3dISGI2aGtBQUFBU1VsRVFWUlloZTNXdVFHQU1CREV3T1VIUDlkL3VTNURCRklEa3lvRmxSR292amVpUzFoWVdGaFkrSS93OWhLZG1RZFRzUFhCNFBsQmNMK0ZoWVdGaFlXRmFYZzhFTXl3VlF2a1VOcDBIYkVKbVFBQUFBQkpSVTVFcmtKZ2dnPT0iIGFsdD0iYmFycGxvdCIgc3R5bGU9ImhlaWdodDogYXV0bzsgd2lkdGg6IDEyMHB4OyI+PC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJuby1jb2wiPjQ8L3RkPgogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJ2YXJpYWJsZS1jb2wiPm9zX2V2ZW50PGJyPltldmVudCBpbmRpY2F0b3JdPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ic3RhdHMtY29sIj4xOiAxMDAwMCAoMTAwJSk8YnI+TWlzc2luZzogMCAoMCUpPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZ3JhcGgtY29sIj48aW1nIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFIZ0FBQUFvQ0FNQUFBQUNOTTRYQUFBQUxWQk1WRVdabVptb3FLaXJxNnV0cmEyd3NMQzJ0cmE1dWJtL3Y3L0l5TWpOemMzVDA5UGYzOS9sNWVYcjYrdi8vLy9UK3NRK0FBQUFDWEJJV1hNQUFBN0RBQUFPd3dISGI2aGtBQUFBU1VsRVFWUlloZTNXdVFHQU1CREV3T1VIUDlkL3VTNURCRklEa3lvRmxSR292amVpUzFoWVdGaFkrSS93OWhLZG1RZFRzUFhCNFBsQmNMK0ZoWVdGaFlXRmFYZzhFTXl3VlF2a1VOcDBIYkVKbVFBQUFBQkpSVTVFcmtKZ2dnPT0iIGFsdD0iYmFycGxvdCIgc3R5bGU9ImhlaWdodDogYXV0bzsgd2lkdGg6IDEyMHB4OyI+PC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4KPC9ib2R5Pgo8L2h0bWw+Cg==" width="100%" height="500px" style="border: 1px solid #ccc; border-radius: 4px;">
</iframe>
<p>If you are not familiar with the <code>TrialSimulator</code>
framework, you can generate PFS and OS directly by calling
<code><a href="../reference/CorrelatedPfsAndOs3.html">CorrelatedPfsAndOs3()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CorrelatedPfsAndOs3.html">CorrelatedPfsAndOs3</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1e6</span>, h01 <span class="op">=</span> <span class="fl">.11</span>, h02 <span class="op">=</span> <span class="fl">.03</span>, h12 <span class="op">=</span> <span class="fl">.10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;        pfs        os pfs_event os_event</span></span>
<span><span class="co">#&gt; 1 4.263915 12.997581         1        1</span></span>
<span><span class="co">#&gt; 2 4.257848  4.257848         1        1</span></span>
<span></span>
<span><span class="co">## should be close to 0.6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">pfs</span>, <span class="va">os</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.58961</span></span>
<span></span>
<span><span class="co">## should be close to 5.0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">pfs</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4.965547</span></span>
<span></span>
<span><span class="co">## should be close to 12.0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">os</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 12.06319</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">pfs</span> <span class="op">&lt;=</span> <span class="va">os</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="further-discussion">Further Discussion<a class="anchor" aria-label="anchor" href="#further-discussion"></a>
</h2>
<p>In this vignette, we demonstrate how to derive the transition hazards
from the medians of PFS and OS, along with their Pearson correlation
coefficient. It is important to note that the correlation is computed
based on data simulated from the specified hazard, and therefore can be
substituted by any other measure that is relevant to the simulation
objective.</p>
<p>For instance, one may simulate trial data for two treatment arms,
each defined by their own PFS and OS medians and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mn>12</mn></msub><annotation encoding="application/x-tex">h_{12}</annotation></semantics></math>.
Instead of using the correlation between simulated PFS and OS times, one
could compute the correlation between the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>z</mi><annotation encoding="application/x-tex">z</annotation></semantics></math>-statistics
from the respective treatment comparisons of PFS and OS. This
alternative approach may be more appropriate in scenarios where the
joint behavior of test statistics, rather than raw survival times, is of
primary interest—such as in the context of multiple testing or endpoint
selection.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Han Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
