<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Condition System for Triggering Milestones in a Trial • TrialSimulator</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Condition System for Triggering Milestones in a Trial">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TrialSimulator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/actionFunctions.html">Specify Actions to Execute at Trial Milestones</a></li>
    <li><a class="dropdown-item" href="../articles/adaptiveDesign.html">An Example of Simulating a Trial with Adaptive Design</a></li>
    <li><a class="dropdown-item" href="../articles/conditionSystem.html">Condition System for Triggering Milestones in a Trial</a></li>
    <li><a class="dropdown-item" href="../articles/defineArms.html">Define and Summarize Arms in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineLongitudinalEndpoints.html">Define Longitudinal Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineNonTimeToEventEndpoints.html">Define Non-Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/defineTimeToEventEndpoints.html">Define Time-to-Event Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/fixedDesign.html">An Example of Fixed Design with Two Correlated Endpoints</a></li>
    <li><a class="dropdown-item" href="../articles/responseAdaptive.html">Designs with Response-Adaptive Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/simulatePfsAndOs.html">Simulate Correlated Progression-Free Survival and Overall Survival as Endpoints in Clinical Trials</a></li>
    <li><a class="dropdown-item" href="../articles/wrappers.html">Wrapper Functions of Common Statistical Methods in TrialSimulator</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zhangh12/TrialSimulator/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Condition System for Triggering Milestones in a Trial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zhangh12/TrialSimulator/blob/main/vignettes/conditionSystem.Rmd" class="external-link"><code>vignettes/conditionSystem.Rmd</code></a></small>
      <div class="d-none name"><code>conditionSystem.Rmd</code></div>
    </div>

    
    
<p>In clinical trial simulations, it is often necessary to specify when
certain actions should be taken. For example, a trial may require
interim data reviews when a predefined number of surrogate endpoint
events occur to support dose selection. More complex triggers can be
defined based on event numbers of one or multiple endpoints, calendar
time, the number of enrolled patients, or a combination of multiple
conditions. These triggers may govern critical analyses such as futility
assessments, sample size re-assessment, interim analyses, and final
evaluations, at various trial milestones.</p>
<p>To facilitate this process, <code>TrialSimulator</code> provides an
intuitive condition-based system for defining milestone triggers. It
supports logical operations (<code>&amp;</code> for AND and
<code>|</code> for OR), allowing users to specify complex conditions
seamlessly. The simulator is then automatically determines the
appropriate time points and executes user-defined actions
accordingly.</p>
<p>Currently, <code>TrialSimulator</code> provides three key functions
to define the earliest possible time for triggering a milestone:</p>
<ul>
<li><p><code>calendarTime(time)</code>: Specifies a minimum trial
duration before a milestone can occur.</p></li>
<li><p><code>enrollment(n)</code>: Specifies a minimum number of
patients that must be enrolled before a milestone can occur.</p></li>
<li><p><code>eventNumber(endpoint, n, arms)</code>: Specifies a minimum
number of observed events for a given endpoint before triggering a
milestone This condition can apply to specific arms or the entire
trial.</p></li>
</ul>
<p>The following sections illustrate various ways to define milestone
triggers using these functions, which could be passed to the argument
<code>when</code> of <code><a href="../reference/milestone.html">milestone()</a></code>.</p>
<div class="section level4">
<h4 id="a-trial-has-been-running-for-6-months">A trial has been running for 6 months<a class="anchor" aria-label="anchor" href="#a-trial-has-been-running-for-6-months"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Note: the unit of time depends on the context of a trial</span></span>
<span><span class="co">##       It is users responsibility to align it with trial's parameters</span></span>
<span><span class="fu"><a href="../reference/calendarTime.html">calendarTime</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; Calendar time &gt;=  6</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="at-least-520-patients-are-enrolled">At least 520 patients are enrolled<a class="anchor" aria-label="anchor" href="#at-least-520-patients-are-enrolled"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/enrollment.html">enrollment</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">520</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of randomized patients &gt;=  520</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="at-least-340-pfs-events-are-observed">At least 340 PFS events are observed<a class="anchor" aria-label="anchor" href="#at-least-340-pfs-events-are-observed"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## condition is based on number of event in the placebo arm</span></span>
<span><span class="co">## Note: 'pfs' is the name of the endpoint, i.e., endpoints(name = 'pfs', ...)</span></span>
<span><span class="co">## Note: 'pbo' is the name of the placebo arm, i.e., arm(name = 'pbo', ...)</span></span>
<span><span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span>endpoint <span class="op">=</span> <span class="st">'pfs'</span>, n <span class="op">=</span> <span class="fl">340</span>, arms <span class="op">=</span> <span class="st">'pbo'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of events (pfs) &gt;= 340 in arms &lt;pbo&gt;.</span></span>
<span></span>
<span><span class="co">## condition can be based on number of event in specific arms</span></span>
<span><span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span>endpoint <span class="op">=</span> <span class="st">'pfs'</span>, n <span class="op">=</span> <span class="fl">340</span>, arms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'pbo'</span>, <span class="st">'trt'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of events (pfs) &gt;= 340 in arms &lt;pbo, trt&gt;.</span></span>
<span></span>
<span><span class="co">## condition can be based on number of event in the trial</span></span>
<span><span class="co">## Note: for example, a trial of more than two arms. </span></span>
<span><span class="co">##       Here the number of PFS events are counted on all arms in trial</span></span>
<span><span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span>endpoint <span class="op">=</span> <span class="st">'pfs'</span>, n <span class="op">=</span> <span class="fl">340</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of events (pfs) &gt;= 340 in all arms in a trial.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="other-examples">Other examples<a class="anchor" aria-label="anchor" href="#other-examples"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## observe at least 200 OS events on at least 500 enrolled patients, or</span></span>
<span><span class="co">## the trial has been running for at least 12 months</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/enrollment.html">enrollment</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span>endpoint <span class="op">=</span> <span class="st">'os'</span>, n <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span> </span>
<span>  <span class="fu"><a href="../reference/calendarTime.html">calendarTime</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="co">#&gt; Combined Condition (or):</span></span>
<span><span class="co">#&gt; Combined Condition (and):</span></span>
<span><span class="co">#&gt;     Number of randomized patients &gt;=  500</span></span>
<span><span class="co">#&gt;     Number of events (os) &gt;= 200 in all arms in a trial. </span></span>
<span><span class="co">#&gt; Calendar time &gt;=  12</span></span>
<span></span>
<span><span class="co">## observe 320 OS or 480 PFS event when the trial has been running for 6 months</span></span>
<span><span class="fu"><a href="../reference/calendarTime.html">calendarTime</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="op">&amp;</span> </span>
<span>  <span class="op">(</span><span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span><span class="st">'os'</span>, n <span class="op">=</span> <span class="fl">320</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="../reference/eventNumber.html">eventNumber</a></span><span class="op">(</span><span class="st">'pfs'</span>, n <span class="op">=</span> <span class="fl">480</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Combined Condition (and):</span></span>
<span><span class="co">#&gt; Calendar time &gt;=  6 </span></span>
<span><span class="co">#&gt; Combined Condition (or):</span></span>
<span><span class="co">#&gt;     Number of events (os) &gt;= 320 in all arms in a trial. </span></span>
<span><span class="co">#&gt;     Number of events (pfs) &gt;= 480 in all arms in a trial.</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Han Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
